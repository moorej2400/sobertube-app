# SoberTube Production Environment Configuration
# Copy this file to .env.production and update with production values
# WARNING: Never commit production secrets to version control

# ===========================================
# Database Configuration
# ===========================================
POSTGRES_PASSWORD=CHANGE_ME_TO_SECURE_PRODUCTION_PASSWORD
POSTGRES_DB=postgres
POSTGRES_USER=supabase_admin
POSTGRES_PORT=5432
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=512MB
POSTGRES_EFFECTIVE_CACHE_SIZE=2GB
POSTGRES_WORK_MEM=8MB
POSTGRES_MAINTENANCE_WORK_MEM=128MB

# ===========================================
# Authentication & JWT Configuration
# ===========================================
JWT_SECRET=CHANGE_ME_TO_SECURE_PRODUCTION_JWT_SECRET_AT_LEAST_32_CHARS
REALTIME_ENCRYPTION_KEY=CHANGE_ME_32_CHAR_ENCRYPTION_KEY
REALTIME_SECRET_KEY_BASE=CHANGE_ME_TO_64_CHARACTER_SECRET_KEY_BASE_FOR_PHOENIX_FRAMEWORK_PRODUCTION

# GoTrue production settings
GOTRUE_DISABLE_SIGNUP=true
GOTRUE_LOG_LEVEL=warn
GOTRUE_RATE_LIMIT_EMAIL_SENT=10
GOTRUE_PASSWORD_MIN_LENGTH=12

# ===========================================
# Application URLs (Update with your domain)
# ===========================================
API_EXTERNAL_URL=https://api.yourdomain.com
GOTRUE_URL=https://auth.yourdomain.com
SITE_URL=https://yourdomain.com
SUPABASE_URL=https://api.yourdomain.com

# ===========================================
# Email Configuration (Production SMTP)
# ===========================================
SMTP_HOST=smtp.yourmailprovider.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_ADMIN_EMAIL=admin@yourdomain.com

# ===========================================
# OAuth Providers (Production Keys)
# ===========================================
GOTRUE_EXTERNAL_GOOGLE_ENABLED=true
GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID=your-production-google-client-id
GOTRUE_EXTERNAL_GOOGLE_SECRET=your-production-google-client-secret

GOTRUE_EXTERNAL_FACEBOOK_ENABLED=true
GOTRUE_EXTERNAL_FACEBOOK_CLIENT_ID=your-production-facebook-app-id
GOTRUE_EXTERNAL_FACEBOOK_SECRET=your-production-facebook-app-secret

# ===========================================
# Storage Configuration (Production S3 or equivalent)
# ===========================================
MINIO_ROOT_USER=CHANGE_ME_PRODUCTION_STORAGE_USER
MINIO_ROOT_PASSWORD=CHANGE_ME_PRODUCTION_STORAGE_PASSWORD
MINIO_DEFAULT_BUCKETS=sobertube-production-storage

# Alternative: Use cloud storage (AWS S3, GCP Cloud Storage, etc.)
# STORAGE_BACKEND=s3
# GLOBAL_S3_BUCKET=your-production-bucket
# GLOBAL_S3_REGION=us-east-1
# GLOBAL_S3_ACCESS_KEY_ID=your-access-key
# GLOBAL_S3_SECRET_ACCESS_KEY=your-secret-key

# ===========================================
# Supabase Keys (Generate production keys)
# ===========================================
ANON_KEY=GENERATE_PRODUCTION_ANON_KEY_WITH_SUPABASE_CLI
SERVICE_KEY=GENERATE_PRODUCTION_SERVICE_KEY_WITH_SUPABASE_CLI

# ===========================================
# Redis Configuration
# ===========================================
REDIS_PASSWORD=CHANGE_ME_PRODUCTION_REDIS_PASSWORD
REDIS_URL=redis://:CHANGE_ME_PRODUCTION_REDIS_PASSWORD@redis:6379

# ===========================================
# Monitoring Configuration
# ===========================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_PRODUCTION_GRAFANA_PASSWORD

# ===========================================
# Production Flags
# ===========================================
NODE_ENV=production
DEBUG=false
LOG_LEVEL=warn

# ===========================================
# Feature Flags
# ===========================================
ENABLE_REALTIME=true
ENABLE_EDGE_FUNCTIONS=true
ENABLE_IMAGE_TRANSFORMATION=true
ENABLE_MONITORING=true

# ===========================================
# Security Configuration
# ===========================================
ENABLE_CORS=true
CORS_ORIGIN=https://yourdomain.com,https://app.yourdomain.com
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000

# ===========================================
# File Upload Configuration
# ===========================================
MAX_FILE_SIZE=104857600
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,video/mp4,video/quicktime
MAX_VIDEO_DURATION=600

# ===========================================
# Database Connection Pool (Production)
# ===========================================
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# ===========================================
# Logging Configuration (Production)
# ===========================================
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_LOGGING=true
LOG_FORMAT=json
LOG_ROTATION=daily

# Service-specific log levels (Production)
PGRST_LOG_LEVEL=warn
STORAGE_LOG_LEVEL=warn
IMGPROXY_LOG_LEVEL=warn

# ===========================================
# Cache Configuration (Production)
# ===========================================
CACHE_TTL=7200
CACHE_MAX_ITEMS=10000
ENABLE_QUERY_CACHE=true

# ===========================================
# WebSocket Configuration (Production)
# ===========================================
WS_HEARTBEAT_INTERVAL=30000
WS_HEARTBEAT_TIMEOUT=60000
WS_MAX_CONNECTIONS=10000

# ===========================================
# Production Tools (Disable for security)
# ===========================================
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_API_DOCS=false
ENABLE_HEALTH_CHECKS=true

# ===========================================
# Backup Configuration (Production)
# ===========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# ===========================================
# Notifications Configuration (Production)
# ===========================================
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_PUSH_NOTIFICATIONS=true
NOTIFICATION_QUEUE_ENABLED=true

# ===========================================
# SSL/TLS Configuration
# ===========================================
ENABLE_SSL=true
SSL_CERT_PATH=/etc/ssl/certs/yourdomain.com.crt
SSL_KEY_PATH=/etc/ssl/private/yourdomain.com.key

# ===========================================
# CDN Configuration
# ===========================================
CDN_ENABLED=true
CDN_URL=https://cdn.yourdomain.com
CDN_CACHE_TTL=86400

# ===========================================
# Performance Monitoring
# ===========================================
ENABLE_APM=true
APM_SERVICE_NAME=sobertube-api
APM_ENVIRONMENT=production

# ===========================================
# High Availability Configuration
# ===========================================
ENABLE_CLUSTERING=true
CLUSTER_NODES=3
LOAD_BALANCER_ENABLED=true

# ===========================================
# Compliance & Privacy
# ===========================================
GDPR_ENABLED=true
CCPA_ENABLED=true
PRIVACY_POLICY_URL=https://yourdomain.com/privacy
TERMS_OF_SERVICE_URL=https://yourdomain.com/terms